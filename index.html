<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>haorwençš„å…¬ç›ŠCDN</title>
	<style>
		.text1 {
		        font-size: 30px;
				color: gray;
		      }
			  .text2 {
		        font-size: 40px;
		      }
	</style>
	<link href="https://down.onmicrosoft.cn/qiniu/u20221021b3a89013_1673266432064_18413624_file.css" rel="stylesheet">
	<link href="" rel="stylesheet">
	<link href="https://down.onmicrosoft.cn/qiniu/u202210176ba36766_1673266498082_14361227_file.css" rel="stylesheet">
	<script defer data-domain="cdn.haorwen.tk" src="https://vercel.site.icodeq.com/js/script.js"></script>
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,300,600,400' rel='stylesheet' type='text/css'>

	<link rel="shortcut icon" href="https://down.onmicrosoft.cn/qiniu/u202210176ba36766_1673267246888_10199769_file.ico">
	<link rel="icon" sizes="16x16 32x32 64x64" href="https://down.onmicrosoft.cn/qiniu/u202210176ba36766_1673267246888_10199769_file.ico">
</head>

<body>
	<main>
		<h1>haorwençš„å…¬ç›ŠCDN</h1>

		<div class="row">
			<div class="col-md-6">
				<section class="widget">
					<header>
						<!-- HTML code -->
						<span class="label label-default fw-normal"></span>

						<!-- JavaScript code -->
						<script>
							const dateElement = document.querySelector('.label');
							  const now = new Date();
							  dateElement.textContent = now.toLocaleDateString('zh-CN', {month: '2-digit', day: '2-digit', year: 'numeric'});
						</script>

					</header>
					<div class="widget-body">
						<div>
							<span class="text2">å½“å‰CDNçŠ¶æ€:<span class="text2">
									<span id="status">è¯·æ±‚ä¸­</span>
						</div>
						<div>
							<span class="text2">è¿‘90å¤©è¯·æ±‚æ•°:<span class="text2">
									<span id="requests">è¯·æ±‚ä¸­</span>
						</div>
						<div>
							<span class="text2">è¿‘90å¤©æµé‡:<span class="text2">
									<span id="total-bytes">è¯·æ±‚ä¸­</span>
						</div>
						<div>
							<span class="text2">CDNæ€»è¿è¡Œæ—¶é—´:
						</div>
						<div>
							<span class="text1">
								<span id="total_time">è¯·æ±‚ä¸­</span>
						</div>
						<script src="https://npm.elemecdn.com/axios/dist/axios.min.js"></script>
						<script>
							axios.get('https://api.gcore.com/cdn/clients/me', {
							    headers: {
							      'Authorization': 'APIKey 4254$48d2889de75243fd37555cdd7b6ac73a87e1211ecc19d2202c7ab1f6f5aa75b934982fc9b6a11560b10cd8193ae76a1b6ba2b77a9db2e37b287c8d72cae2d461'
							    }
							  })
							    .then(function (response) {
							      if (response.data.service.status === 'active') {
							        document.querySelector("#status").innerHTML = 'æ­£å¸¸';
							        document.querySelector("#status").style.color = 'green';
							      } else {
							        document.querySelector("#status").innerHTML = 'å¼‚å¸¸';
							        document.querySelector("#status").style.color = 'red';
							      }
							    })
							    .catch(function (error) {
							      console.log(error);
							    });
						</script>
						<script>
							function convertToGB(bytes) {
							        return (bytes / 1073741824).toFixed(2);
							      }
							// è·å–å½“å‰æ—¶é—´ï¼ˆUTCï¼‰å¹¶è½¬åŒ–ä¸ºISO 8601/RFC 3339 æ ¼å¼
let nowtime = new Date().toISOString();

// è·å–90å¤©å‰çš„æ—¶é—´ï¼ˆUTCï¼‰
let ninetyDaysAgo = new Date();
ninetyDaysAgo.setDate(ninetyDaysAgo.getDate() - 90);
ninetyDaysAgo = ninetyDaysAgo.toISOString();

// åˆ›å»ºæ–°çš„é“¾æ¥ï¼Œæ’å…¥fromå’Œtoæ—¶é—´
let link = `https://api.gcore.com/cdn/statistics/series?service=CDN&from=${ninetyDaysAgo}&to=${nowtime}&metrics=total_bytes&metrics=requests&group_by=resource`;

console.log(link);
							axios.get(link, {
							  headers: {
							    'Authorization': 'APIKey 4254$48d2889de75243fd37555cdd7b6ac73a87e1211ecc19d2202c7ab1f6f5aa75b934982fc9b6a11560b10cd8193ae76a1b6ba2b77a9db2e37b287c8d72cae2d461'
							  }
							})
							  .then(function (response) {
							    // response.data contains the API response
							    const metrics = response.data.resource['149282'].metrics;
							    const requests = metrics.requests;
							    const totalBytes = convertToGB(metrics.total_bytes);
							    // Now you can use the data to update the HTML, for example:
							    document.querySelector("#requests").textContent = requests;
							    document.querySelector("#total-bytes").textContent = `${totalBytes} GB`;
							  })
							  .catch(function (error) {
							    console.log(error);
							  });
						</script>
						<script>
							function computeTimeDifference(startDate, endDate) {
							  const diff = endDate - startDate; // difference in milliseconds
							  const diffInMinutes = diff / 60000; // convert to minutes
							  const diffInHours = diffInMinutes / 60; // convert to hours
							  const diffInDays = diffInHours / 24; // convert to days
							  const diffInMonths = diffInDays / 30; // convert to months (approximate)
							  const months = Math.floor(diffInMonths);
							  const days = Math.floor(diffInDays % 30);
							  const hours = Math.floor(diffInHours % 24);
							  const minutes = Math.floor(diffInMinutes % 60);
							  return `${months}æœˆ${days}å¤© ${hours}å°æ—¶${minutes}åˆ†`;
							}
							const startDate = new Date(2023, 0, 8, 8, 55); // current UTC time
							const endDate = new Date(); // 1/8/23, 8:55
							const timeDifference = computeTimeDifference(startDate, endDate);
							document.querySelector("#total_time").textContent = timeDifference;
						</script>


						<p>ps:ä¸Šæ–¹æ•°æ®åŸºäºå®æ—¶è·å–ï¼Œè‹¥ç½‘ç»œç¯å¢ƒä¸ä½³å¯èƒ½è·å–å¤±è´¥ï¼ˆè¡¨ç°ä¸ºä¸€ç›´è¯·æ±‚ä¸­ï¼‰ä¸€èˆ¬æ›´æ¢ç½‘ç»œå³å¯è§£å†³ã€‚</p>

					</div>
				</section>
			</div>
			<div class="col-md-6">
				<section class="widget">
					<header>
						<h2>æœ¬é¡¹ç›®ç›¸å…³</h2>
					</header>
					<div class="widget-body">

						<p>
							ä¼—æ‰€å‘¨çŸ¥ï¼Œ <a href="https://www.jsdelivr.com/">jsdelivr</a>åœ¨å›½å†…çš„è®¿é—®ä½“éªŒå¹¶ä¸ç®—ç†æƒ³ï¼Œäºæ˜¯å°±å¼€æ”¾äº†è¿™ä¸ªcdnä¾›å›½å†…å¼€å‘è€…ä½¿ç”¨ï¼Œç¼“å­˜æ—¶é—´æ˜¯12å°æ—¶ï¼Œæ›´å¤šè¯¦æƒ…å¯åœ¨æ—è¾¹çš„æ•°æ®ç»Ÿè®¡ä¸­æŸ¥çœ‹ã€‚æœ¬cdnä½¿ç”¨æ–¹å¼å¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œåªéœ€å°†é“¾æ¥ä¸­çš„cdn.jsdelivr.netæ›¿æ¢ä¸ºjsd.haorwen.tkå³å¯ä½¿ç”¨ï¼ˆè¯·ä¸è¦ç”¨äºåŠ é€Ÿå›¾ç‰‡ï¼Œæ»¥ç”¨å¯èƒ½è¢«å°ç¦ï¼ï¼‰ï¼Œå¦‚æœcdnå‡ºäº†ä»€ä¹ˆé—®é¢˜ä¹Ÿå¯ä»¥å‘é€é‚®ä»¶ç»™<a href="mailto:haorwen@qq.com">haorwen@qq.com</a>
						</p>
						<p>æœ¬äººæ˜¯çº¯å‰ç«¯å°ç™½ï¼Œåœ¨å¼€å‘æœ¬é¡¹ç›®çš„è¿‡ç¨‹ä¸­éå¸¸æ„Ÿè°¢<a href="https://icodeq.com/"> @zkeq </a>å¤§ä½¬çš„å¸®åŠ©ï¼Œ<a href="https://chat.openai.com/chat">ChatGPT</a>ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„å·¥å…·ï¼Œæœ¬ç½‘é¡µæ‰˜ç®¡äº<a href="https://vercel.com/">Vercel</a>ï¼Œå¦‚æœå–œæ¬¢è¿™ä¸ªcdnå¯ä»¥åˆ°<a href="https://afdian.net/@haorwen">æˆ‘çš„çˆ±å‘ç”µ</a>èµåŠ©æ¥æ”¯æŒæˆ‘ğŸ˜Š
						</p>
					</div>
				</section>
			</div>
		</div>

		<footer>
			<p class="text-center">
				<span class="fw-semi-bold">cdn.haorwen.tk</span> 2023 | haorwençš„å…¬ç›Šcdn | <a href="https://github.com/haorwen">
					<i class="fa fa-github"></i> æˆ‘çš„GitHub
				</a>
			</p>
		</footer>
	</main>

	<script src="https://lib.baomitu.com/jquery/1.12.4/jquery.min.js"></script>
</body>

</html>
